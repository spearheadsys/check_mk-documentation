

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Adding a Windows host &mdash; Check_MK 1.2.6 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Check_MK 1.2.6 documentation" href="index.html"/>
        <link rel="next" title="Multisite" href="multisite.html"/>
        <link rel="prev" title="Adding a Linux host" href="firstlnxhost.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> Check_MK</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">What is Monitoring all about?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#states">States</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#events">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-is-a-monitoring-system">What is a monitoring system?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-is-a-check">What is a check?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#active-vs-passive-checks">Active vs. Passive Checks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cmkarchitecture.html">Check_MK Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#check-mk-components">Check_MK Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#configuration-check-engine">Configuration &amp; Check Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#livestatus">Livestatus</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#multisite">Multisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#wato">WATO</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#notify">Notify</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#business-intelligence">Business Intelligence</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#mobile">Mobile</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#event-console">Event Console</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Check_MK Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#operating-system">Operating System</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#disk-space">Disk Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#smtp-for-outgoing-emails">SMTP for outgoing emails</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#time-services">Time services</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#repository">Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#downloading-check-mk">Downloading Check_MK</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#confirmation">Confirmation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="firstsite.html">Create a Site</a><ul>
<li class="toctree-l2"><a class="reference internal" href="firstsite.html#omd-command">OMD command</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstsite.html#omd-config-command">OMD config command</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstsite.html#creating-the-site">Creating the site</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contacts.html">Contacts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contacts.html#roles">Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="contacts.html#contact-groups">Contact Groups</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="firstlnxhost.html">Adding a Linux host</a><ul>
<li class="toctree-l2"><a class="reference internal" href="firstlnxhost.html#agent-bakery">Agent bakery</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstlnxhost.html#prebuilt-package">Prebuilt package</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstlnxhost.html#xinetd">Xinetd</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstlnxhost.html#adding-host-to-omd">Adding host to OMD</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Adding a Windows host</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#agent-bakery">Agent bakery</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prebuilt-package">Prebuilt package</a></li>
<li class="toctree-l2"><a class="reference internal" href="#windows-installer">Windows installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-host-to-omd">Adding host to OMD</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="multisite.html">Multisite</a><ul>
<li class="toctree-l2"><a class="reference internal" href="multisite.html#views">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="multisite.html#distributed-monitoring">Distributed monitoring</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Check_MK</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Adding a Windows host</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="adding-a-windows-host">
<h1>Adding a Windows host<a class="headerlink" href="#adding-a-windows-host" title="Permalink to this headline">¶</a></h1>
<p>In order to monitor your Windows hosts you must install the check_mk agent and provide a way for the check_mk server to communicate with the agents.</p>
<p>Installation of the check_mk agent can be performed a couple of different ways. Below we cover the most common options:</p>
<ul class="simple">
<li>Use the agent bakery and &#8220;bake&#8221; your own agent</li>
<li>Grab one directly from your existing OMD site(s)</li>
</ul>
<div class="section" id="agent-bakery">
<h2>Agent bakery<a class="headerlink" href="#agent-bakery" title="Permalink to this headline">¶</a></h2>
<p>The agent bakery allows you to use the same powerful rules based engine from WATO to create agents for you monitored servers. From WATO, access the Monitoring Agents section, click on the Rules button and configure your agents accordingly.</p>
<p>Once you have created the rules to your specifications go back to the Monitoring Agents main page and click on the Bake Agents button.</p>
<p>Depending on your rules you will have one or more agents for one or more operating environments (rpm, deb, msi). You can click on the DEB/RPM/MSI link and download your agent.</p>
<p>Copy that agent over to your monitored server(s) and install according to your operating environment requirements.</p>
</div>
<div class="section" id="prebuilt-package">
<h2>Prebuilt package<a class="headerlink" href="#prebuilt-package" title="Permalink to this headline">¶</a></h2>
<p>All OMD site instances have prebuilt agents available in ~share/check_mk/agents. You will find there the MSI, RPM and DEB agent as well as the pure (script) agents (check_mk_agent.linux).</p>
<p>These prebuilt agents are also available via the OMD site URL: <a class="reference external" href="http://hostname_or_ip">http://hostname_or_ip</a>/&lt;omd site name&gt;/check_mk/agents/. At this URL you will also find additional plugins as well as the xinetd.conf configuration file.</p>
</div>
<div class="section" id="windows-installer">
<h2>Windows installer<a class="headerlink" href="#windows-installer" title="Permalink to this headline">¶</a></h2>
<p>The windows installer supports the following command line arguments:</p>
<div class="highlight-python"><div class="highlight"><pre>/S - runs the installer silently
/D= - sets the default installation directory
</pre></div>
</div>
<p>After installation the check_mk_agent service should have started automatically. You can confirm this by telnetting from your OMD site to the monitored server on tcp port 6556:</p>
<div class="highlight-python"><div class="highlight"><pre>user@host&gt; telnet xyzhost123 6556
&lt;&lt;&lt;check_mk&gt;&gt;&gt;
Version: 1.2.5i5p3
BuildDate: Jul 28 2014
Architecture: 32bit
AgentOS: windows
Hostname: xyzhost123
WorkingDirectory: C:\Windows\system32
ConfigFile: C:\Program Files (x86)\check_mk\check_mk.ini
AgentDirectory: C:\Program Files (x86)\check_mk
PluginsDirectory: C:\Program Files (x86)\check_mk\plugins
SpoolDirectory: C:\Program Files (x86)\check_mk\spool
LocalDirectory: C:\Program Files (x86)\check_mk\local
ScriptStatistics: Plugin C:0 E:0 T:0 Local C:0 E:0 T:0
OnlyFrom: 0.0.0.0/0
&lt;&lt;&lt;uptime&gt;&gt;&gt;
1929017
&lt;&lt;&lt;df&gt;&gt;&gt;
C:\ NTFS 83991548 49014400 34977148 59% C:\
Share&amp;ExchangeBackup NTFS 251658236 222849392 28808844 89% D:\
Exchange NTFS 150674428 73825484 76848944 49% E:\
</pre></div>
</div>
</div>
<div class="section" id="adding-host-to-omd">
<h2>Adding host to OMD<a class="headerlink" href="#adding-host-to-omd" title="Permalink to this headline">¶</a></h2>
<p>After confirming that the agent is accessible you can access WATO, Hosts and click on New host. For our example you can fill out just the hostname and click on Save &amp; go to Services button.</p>
<p>If the hostname is resolvable via DNS you do not need to also specify the IP address however if it is not then the IP address is a required field.</p>
<p>After this step you will be taken to the Services page where you can select and configure the services that check_mk has discovered on your server.</p>
<p>For every service discovered you can choose to:</p>
<img alt="_images/srv-discovery.png" src="_images/srv-discovery.png" />
<ol class="arabic simple">
<li>View and edit parameters</li>
<li>Edit and analyze check parameters</li>
<li>Create a rule to permanently disable discovery of said service</li>
<li>Temporarily ignore the service</li>
</ol>
<ul class="simple">
<li>Additional details can be found at the check_mk site <a class="reference external" href="https://mathias-kettner.de/checkmk_windows.html">https://mathias-kettner.de/checkmk_windows.html</a></li>
</ul>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="multisite.html" class="btn btn-neutral float-right" title="Multisite">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="firstlnxhost.html" class="btn btn-neutral" title="Adding a Linux host"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.2.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>